<!DOCTYPE html>
<html>
<head>
	<title>Search Movie</title>

	<link rel=stylesheet href = "style.css">

</head>
<body>

	<script src="jquery.js"></script>

	<header class='banner'>
	</header>

	
		<div class = 'margin'>
			<table id = 'table-logo-socialsites'>
				<br><br><tr>
					<td><img id='logo-movie' src='mo.jpg' width="300"></td>
					<td>
						<input id = "searchtextbox" type = "text" autofocus='on' align='left' placeholder = "Type here"/>
					</td>
					<td>
						<a href = "#" onclick='displayResult()'><img src = "button.png" title = "Search" id = "searchbutton"></a>
					</td>
					<td width='197px'>
						<div id='' align='center'></div>
					</td>
				</tr>
				<tr> 
					<td>
						<img id='logo-fb' src='fb.jpg' width="50" height="50">
						<img id='logo-google' src='go.jpg' width="50" height="50">
						<img id='logo-twitter' src='tw.jpg' width="50" height="50">
						<img id='logo-youtube' src='yo.jpg' width="100" height="50">
						<img id='logo-tumbler' src='tb.png' width="50" height="50">
					</td>
				</tr>
			</table>
		</div>

		<div class="div-results">
			<!--<h1>HELLO. THANK YOU!</h1>-->

		</div>

	<script type="text/javascript">
		var searchedTitles = new Array();
		var changeDiv = document.getElementById('div-header');
		var searchedMovie = document.getElementById('searchtextbox');
        var searchButton = document.getElementById('searchbutton');
        searchedMovie.onkeydown = function(ev){
            if(ev.keyCode === 13){
                displayResult();
            }
        }

        var displayResult = function() {
            if (searchedMovie.value.length === 0) {
                alert('Empty.. NO TITLE')
            }

            


            else{

					    $(function(){

					    
						$('body').append('<h1 class="movie-result">' + "Search Result: " + searchedMovie.value + '<br></h1>');
						$('body').append('<h3 class="h3-result">' + "Results:" + '<br><br></h1>');
						$('.h3-result').fadeOut(1500, function(){ $(this).remove();});
						$('#movie-result').fadeIn(1500, function(){ $(this).remove();});

						var server = 'http://api.rottentomatoes.com/api/public/v1.0/movies.json'
						$.ajax({
							url:server,
							dataType: 'jsonp',
							data:{
								q: searchedMovie.value,
								apiKey: 'hcrurhsttexasrgfm2y6yahm'
							},
							success:showMovies
						});

						function showMovies(response){
							console.log('response', response);
							var movies = response.movies;
							var movieItems = document.getElementsByClassName('h3-result');
							$('.h3-result').remove();
							var searched = document.getElementsByClassName('movie-result')
							$('.movie-result').remove();

							for(var i = 0; i < movies.length; i++)
							{
								var movie = movies[i];
								
								
								$('body').append('<h2 class="h3-result" hidden="true">'+ movie.title + '</h2>');
								$('body').append('<h3 class="h3-result" hidden="true"> Released Date:<br> '+ movie.release_dates.dvd + '</h3>');
								$('body').append('<h3 class="h3-result" hidden="true">Critics:<br> '+ movie.critics_consensus + '</h3>');
								$('body').append('<img class="h3-result" hidden="true" src="' + movie.posters.thumbnail + '"/>');
								$('.h3-result').show('slow', function() {
    
  							});






							}
					
						}
						 
						
						});  
						searchedMovie.value= null;
						movie.remove();


        		}
        	};

        
    </script>

</body>
</html>